document.addEventListener("DOMContentLoaded",function(){"use strict";let d;function n(t,n=!1,r){let a=new XMLHttpRequest,i=!1,o,s;a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200===a.status){let e=(new DOMParser).parseFromString(a.responseText,"text/html");(o=n&&(o=e.getElementById(n.id))||e)?s=Array.from(o.children):i="Контейнер с id «"+n.id+"» не найден в запросе "+t+"\n",s?(r.parentNode.removeChild(r),s.forEach(e=>{e.classList.contains("more")?(r.href=e.href,r.innerText=d,n.appendChild(r)):n.appendChild(e)})):i+="Элементы не найдены",i&&console.warn(i)}else 400==a.status?console.warn("Ошибка 400 в ajax-запросе"):console.warn("Неизвестная ошибка в ajax-запросе")},a.open("GET",t,!0),a.send()}function r(e){for(;e&&e.parentNode;)if((e=e.parentNode)&&void 0!==e.id&&"ctrl_panel"!=e.id)return e;return null}var e=document.getElementsByClassName("more");[].forEach.call(e,function(e){var t;(t=e).addEventListener("click",function(e){d=t.innerText,t.innerHTML="Загрузка…",t.disabled=!0,-1!==this.href.indexOf("ajax_get")?n(this.href,r(t),t):n(this.href+"&ajax_get=Y",r(t),t),e.preventDefault(),e.stopPropagation()},!1)})});